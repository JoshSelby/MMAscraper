unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477")))
femOpp
femOpp1
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
femOpp <- bind_rows(femOpp, femOpp1)
colnames(femOpp) <- paste0("Link", (i+1):0)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
femOpp
femOpp1
paste0("Link", (i+1):0)
colnames(femOpp1) <- paste0("Link", (i+1):0)
femOpp
colnames(femOpp) <- paste0("Link", (i+1):1
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
}
femOpp <- femOpp %>%
select(colnames(femOpp) %>% head(-1) %>% tail(-1))
femOpp <- femOpp %>% select(colnames(femOpp) %>% rev) %>% as.data.table()
femOpp <- setnames(femOpp[, {un <- unlist(.SD); as.list(un[order(un=='')])},
.(grp = 1:nrow(femOpp))][, grp := NULL], names(femOpp))[]
femOpp <- femOpp %>% group_by(Link1) %>% slice(1)
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp
femOpp1
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
while (length(toSearch)>0) {
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
}
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp1 <- tibble()
i= 1
while (length(toSearch)>0) {
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
}
rm(femOpp1)
View(femOpp)
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
femOpp1 <- tibble()
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- readRDS("~/GitHub/MMAscraper/scripts/9-various-tables/data/fightersTable.rds")
fightMetricsEvent <- readRDS("~/GitHub/MMAscraper/scripts/5-metrics/data/fightMetricsEvent.rds")
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
femOpp1 <- tibble()
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
View(femOpp)
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
femOpp1 <- tibble()
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
fightersTable <- readRDS("~/GitHub/MMAscraper/scripts/9-various-tables/data/fightersTable.rds")
fightMetricsEvent <- readRDS("~/GitHub/MMAscraper/scripts/5-metrics/data/fightMetricsEvent.rds")
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
femOpp1 <- tibble()
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
View(femOpp)
View(femOpp1)
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
femOpp1 <- tibble()
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1) %>% unique
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1) %>% unique
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1) %>% unique
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
while (length(toSearch)>0) {
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1) %>% unique
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
}
View(femOpp)
rm(femOpp1)
femOpp <- femOpp %>%
select(colnames(femOpp) %>% head(-1) %>% tail(-1))
femOpp <- femOpp %>% select(colnames(femOpp) %>% rev) %>% as.data.table()
femOpp <- setnames(femOpp[, {un <- unlist(.SD); as.list(un[order(un=='')])},
.(grp = 1:nrow(femOpp))][, grp := NULL], names(femOpp))[]
View(femOpp)
femOpp <- femOpp %>% group_by(Link1) %>% slice(1)
View(femOpp)
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
femOpp1 <- tibble()
i= 1
while (length(toSearch)>0) {
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp1 <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp1) <- paste0("Link", (i+1):0)
colnames(femOpp) <- paste0("Link", (i+1):1)
femOpp <- bind_rows(femOpp, femOpp1) %>% unique
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique %>% na.omit %>% as.character()
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1)) %>% unique %>% na.omit %>% as.character()
i=i+1
}
rm(femOpp1)
femOpp <- femOpp %>%
select(colnames(femOpp) %>% head(-1) %>% tail(-1))
femOpp <- femOpp %>% select(colnames(femOpp) %>% rev) %>% as.data.table()
femOpp <- setnames(femOpp[, {un <- unlist(.SD); as.list(un[order(un=='')])},
.(grp = 1:nrow(femOpp))][, grp := NULL], names(femOpp))[]
View(femOpp)
fightMetricsEvent <- readRDS("~/GitHub/MMAscraper/scripts/5-metrics/data/fightMetricsEvent.rds")
fightMetricsEvent %>% filter(grepl("Harvey-Park", Link1))
fightMetricsEvent %>% filter(grepl("Harvey-Park", Link1)) %>% View()
fightMetricsEvent %>% filter(grepl("Jaleel-W", Link1)) %>% View()
fightMetricsEvent %>% filter(grepl("Demetrius-Wilson", Link1)) %>% View()
fightMetricsEvent %>% filter(grepl("Joby-Sanchez", Link1)) %>% View()
fightMetricsEvent %>% filter(grepl("Donald-Sanchez", Link1)) %>% View()
fightMetricsEvent %>% filter(grepl("Fernando-Padilla", Link1)) %>% View()
source('~/GitHub/MMAscraper/scripts/9-various-tables/Add Gender.R', echo=TRUE)
source('./scripts/1-raw-data/update-scraper.R', echo=TRUE)
source('./scripts/1-raw-data/update-scraper.R', echo=TRUE)
source('./scripts/3-records/recordAdder.R', echo=TRUE)
source('./scripts/4-ratings/add_ratings.R', echo=TRUE)
source('./scripts/5-metrics/metrics.R', echo=TRUE)
source('./scripts/5-metrics/events.R', echo=TRUE)
source('./scripts/7-scrape-odds/futureOdds.R', echo=TRUE)
source('./scripts/7-scrape-odds/updateOdds.R', echo=TRUE)
source('./scripts/8-append-odds/matchOdds-filtfights.R', echo=TRUE)
source('./scripts/8-append-odds/SherdogToBFO.R', echo=TRUE)
source('./scripts/9-various-tables/Current Stats.R', echo=TRUE)
source('./scripts/9-various-tables/Add Gender.R', echo=TRUE)
View(fightersTable)
