select(Link1, Link2) %>%
unique %>%
setdiff(c(searched, toSearch, "Javio-Flores-10477"))
searched <- c(searched, toSearch)
toSearch <- c(toSearch, femOpp) %>% setdiff(toSearch)
femOpp
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique
searched <- c(searched, toSearch)
toSearch <- c(toSearch, femOpp) %>% setdiff(toSearch)
c(toSearch, femOpp) %>% setdiff(toSearch)
View(toSearch)
View(toSearch)
toSearch
c(toSearch, femOpp)
c(toSearch, femOpp) %>% setdiff(toSearch)
fightersTable <- readRDS("~/GitHub/MMAscraper/scripts/9-various-tables/data/fightersTable.rds")
fightMetricsEvent <- readRDS("~/GitHub/MMAscraper/scripts/5-metrics/data/fightMetricsEvent.rds")
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
i=1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique
colnames(femOpp)
femOpp %>% colnames %>% tail(1)
femOpp %>% pull(femOpp %>% colnames %>% tail(1))
femOpp %>% colnames %>% tail(2)
femOpp %>% colnames %>% tail(2) %>% head(1)
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1))
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
left_join(femOpp, .)
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
left_join(femOpp, ., by=c("Link2" = "Link1")) %>% View()
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>% filter(!(Link2 %in% Link1))
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>% View()
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>% filter(Link2 %in% searched)
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>% filter(Link2 %in% c(searched, toSearch))
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>% filter(!(Link2 %in% c(searched, toSearch)))
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
i=1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
rm(femOpp)
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
i=1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
femOpp <- tbl()
femOpp <- tibble()
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
femOpp <- tibble(Link1)
femOpp <- tibble("Link1")
femOpp <- tibble("Link1" = NA)
femOpp <- tibble("Link1" = NA)
?tibble
tibble()
tibble("Link1")
tibble()
tibble(Link1)
femOpp <- tibble(Link1 = as.character())
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
femOpp <- tibble(Link2 = as.character())
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(), Link2 = toSearch)
femOpp <- tibble(Link1 = as.character(), Link2 = "Ronda-Rousey-73073")
View(femOpp)
tibble(NA, "Daf")
tibble(Link1 = NA, "Daf")
tibble(Link1 = NA, Link2 = "Daf")
tibble(Link1 = as.character(), Link2 = toSearch)
tibble(Link1 = "", Link2 = toSearch)
tibble(Link1 , Link2 = toSearch)
tibble(Link1 = NA, Link2 = toSearch)
tibble(Link1 = as.character(NA), Link2 = toSearch)
femOpp <- tibble(Link1 = as.character(NA), Link2 = toSearch)
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch)))
femOpp
colnames(femOpp)
colnames(femOpp)[3]
tail(colnames(femOpp),1)
paste("Link", i)
paste0("Link", i)
i=3
paste0("Link", i)
tail(colnames(femOpp),1) <- paste0("Link", i)
colnames(femOpp)
colnames(femOpp)[1]
colnames(femOpp)[2]
colnames(femOpp)[-1]
colnames(femOpp)[:-1]
colnames(femOpp)[:1]
colnames(femOpp)[i]
colnames(femOpp)[i] <- paste0("Link", i)
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link2 = toSearch)
i=2
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
colnames(femOpp)[i] <- paste0("Link", i)
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
colnames(femOpp)[i] <- paste0("Link", i)
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c(paste0("Link", i) = "Link1"))
colnames(femOpp)
colnames(femOpp) %>% rev()
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link2 = toSearch)
i=2
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
colnames(femOpp)[i] <- paste0("Link", i)
colnames(femOpp) <- colnames(femOpp) %>% rev
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, .)
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, .)
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link1" = "Link1"))
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link2 = toSearch)
i= 2
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
colnames(femOpp)[i] <- paste0("Link", i)
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
femOpp
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link2 = toSearch)
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link2" = "Link1"))
colnames(femOpp)[i+2] <- paste0("Link", i+2)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch)))
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link2 = as.character(NA), Link1 = toSearch)
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link1" = "Link1"))
colnames(femOpp)[i+2] <- paste0("Link", i+2)
colnames(femOpp)[1] <- "Link1"
colnames(femOpp)[i+2] <- paste0("Link", i+2)
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link2 = as.character(NA), Link1 = toSearch)
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link1" = "Link1"))
colnames(femOpp)[1] <- "Link1"
colnames(femOpp)[1] <- "Link0"
colnames(femOpp)[i+2] <- paste0("Link", i+1)
colnames(femOpp) <- colnames(femOpp) %>% rev()
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp)
paste0("Link", 1:5)
paste0("Link", 0:i)
paste0("Link", 0:(i+1))
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
i= 1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp) <- paste0("Link", (i+1):0)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp) <- paste0("Link", (i+1):0)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp) <- paste0("Link", (i+1):0)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
for (i in 1:15) {
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp) <- paste0("Link", (i+1):0)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
}
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
i= 1
for (i in 1:15) {
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp) <- paste0("Link", (i+1):0)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
}
View(femOpp)
fightersTable$Sex <- "M"
searched <- c()
toSearch <- "Ronda-Rousey-73073"
femOpp <- tibble(Link1 = as.character(NA), Link0 = toSearch)
i= 1
for (i in 1:15) {
fightersTable <- fightersTable %>%
mutate(Sex = ifelse(Link %in% toSearch, "F", Sex))
femOpp <- fightMetricsEvent %>%
filter(Link1 %in% toSearch) %>%
select(Link1, Link2) %>%
unique %>%
filter(!(Link2 %in% c(searched, toSearch, "Javio-Flores-10477"))) %>%
left_join(femOpp, ., by=c("Link0" = "Link1"))
colnames(femOpp) <- paste0("Link", (i+1):0)
searched <- femOpp %>% pull(femOpp %>% colnames %>% tail(2) %>% head(1)) %>% unique
toSearch <- femOpp %>% pull(femOpp %>% colnames %>% tail(1))
i=i+1
}
View(femOpp)
source('~/GitHub/MMAscraper/scripts/9-various-tables/Add Gender.R', echo=TRUE)
View(fightersTable)
fightersTable %>% filter(Org == "UFC") %>% arrange(rating)
fightersTable %>% filter(Org == "UFC" & Last.Date > 2010) %>% arrange(rating)
fightersTable %>% filter(Org == "UFC" & Last.Date > 2010) %>% arrange(rating) %>% View()
fightersTable %>% filter(Org == "UFC" & Last.Date > "2010-01-01") %>% arrange(rating) %>% View()
fightMetricsEvent %>% View()
View(fightMetricsEvent)
View(femOpp)
View(fightersTable)
femOpp
femOpp %>% filter(Link1)
View(femOpp)
length(c(1:5, NA, NA))
c(1:5, NA, NA)
!is.na(c(1:5, NA, NA))
!is.na(c(1:5, NA, NA)) %>% sum
!is.na(femOpp)
!is.na(femOpp) %>% sum
!is.na(femOpp) %>% rowsum()
!is.na(femOpp) %>% rowSums
?rowSums
!is.na(femOpp) %>% class
!is.na(femOpp)
!is.na(femOpp) %>% class
library(tidyverse)
!is.na(femOpp) %>% class
class(!is.na(femOpp))
rowSums(!is.na(femOpp))
rowSums(!is.na(femOpp))-1
femOpp$distance <- rowSums(!is.na(femOpp))-1
femOpp$distance %>% mean
hist(femOpp$distance)
table(femOpp$distance)
table(femOpp$distance)/3703 * 100
table(femOpp$distance)
table(femOpp$distance)
table(femOpp$distance)/3703 * 100 %>% round(2)
library(tidyverse)
table(femOpp$distance)
table(femOpp$distance)/3703 * 100 %>% round(2)
table(femOpp$distance)
(table(femOpp$distance)/3703 * 100) %>% round(2)
fightMetricsEvent %>% filter(Link1 == "Neil-Magny-69166")
fightMetricsEvent %>% filter(Link1 == "Neil-Magny-69166") %>% View()
fightMetricsEvent %>% filter(Link1 == "Lance-Palmer-80836") %>% View()
fightMetricsEvent %>% filter(Referee == "John McCarthy")
fightMetricsEvent %>% filter(Referee == "John McCarthy") %>% View()
fightMetricsEvent %>% filter(Referee == "Herb Dean") %>% View()
fightMetricsEvent %>% filter(R==5 & Time == "5:00") %>% View()
fightMetricsEvent %>% filter(R==5 & Time == "5:00" & Org %in% c("UFC", "Bellator")) %>% View()
femOpp$distance %>% mean
