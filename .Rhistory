) +
facet_wrap(~ groupName) +
scale_colour_manual(
values = c(Validation = "#377EB8", Test = "#FF7F00"),
guide = guide_legend(
title = "Experiment", reverse = TRUE,
override.aes = list(size = 4)
)
) +
labs(
x = "K factor", y = "Goodness of fit (RMSE)",
title = "Best goodness of fit of Elo",
subtitle = paste0(
'All optimal K values from test experiment (with longer "warm up") are',
' lower than from validation experiment.'
)
) +
theme(title = element_text(size = 14), strip.text = element_text(size = 12))
}
plot_experiment_results(plot_data)
if (!require("comperank")) install.packages("comperank")
library(comperank)
if (!require("tidyverse")) install.packages("tidyverse")
library(tidyverse)
if (!require("lubridate")) install.packages("lubridate")
library(lubridate)
if (!require("Rcpp")) install.packages("Rcpp")
library(Rcpp)
fights <- readRDS(file = "~/GitHub/MMAscraper/records-3/fights_records.rds")
fights2 <- fights %>%
filter(Result %in% c("win", "draw") & Method != "DQ") %>%
mutate(score1 = ifelse(Result == "win", 1, 0.5),
score2 = ifelse(Result == "win", 0, 0.5)) %>%
select(game = match_id, player1 = Link1, score1, player2 = Link2, score2)
fights2 <- as_widecr(fights2)
# 150 was shown to be the optimal K
elo <- add_elo_ratings(fights2, K=150, initial_ratings = 1000)
rankelo <- rank_elo(fights2, K=150, keep_rating = TRUE, initial_ratings = 1000) %>% arrange(ranking_elo)
fightsM <- fights %>%
filter(Result %in% c("win", "draw") & Method != "DQ")
fightsElo <- full_join(fightsM, elo, by = c("match_id" = "game")) %>%
select(match_id, Link1, Result, Link2, Method, Method_d, Event, Date,
rating1Before, rating2Before, rating1After, rating2After) %>%
rename(r1b = rating1Before, r2b = rating2Before, r1a = rating1After, r2a = rating2After) %>%
mutate_at(.vars = vars(r1b:r2a),
.funs = round)
# Fighters' highest elo achieved
top10 <- fightsElo %>% group_by(Link1) %>% filter(r1a == max(r1a)) %>%
arrange(-r1a) %>% select(Link1) %>% head(10) %>% .$Link1
fightsEloLong <- fightsElo %>%
select(match_id, Link1, Date, r1a) %>%
full_join(fightsElo %>%
select(match_id, Link2, Date, r2a),
by = c("match_id" = "match_id", "Link1" = "Link2",
"Date" = "Date", "r1a" = "r2a")) %>%
rename(Link = Link1, rating = r1a) %>%
arrange(Date)
rankelo
rankelo %>% View
top_25_elo <- readRDS("~/GitHub/MMAscraper/top_25_elo.rds")
fightsElo <- readRDS("~/GitHub/MMAscraper/fightsElo.rds")
View(top_25_elo)
fights <- readRDS(file = "~/GitHub/MMAscraper/records-3/fights_records.rds")
fights2 <- fights %>%
filter(Result %in% c("win", "draw") & Method != "DQ") %>%
mutate(score1 = ifelse(Result == "win", 1, 0.5),
score2 = ifelse(Result == "win", 0, 0.5)) %>%
select(game = match_id, player1 = Link1, score1, player2 = Link2, score2)
fights2 <- as_widecr(fights2)
if (!require("comperank")) install.packages("comperank")
library(comperank)
if (!require("tidyverse")) install.packages("tidyverse")
library(tidyverse)
if (!require("Rcpp")) install.packages("Rcpp")
if (!require("lubridate")) install.packages("lubridate")
library(lubridate)
library(Rcpp)
fights <- readRDS(file = "~/GitHub/MMAscraper/records-3/fights_records.rds")
fights2 <- fights %>%
filter(Result %in% c("win", "draw") & Method != "DQ") %>%
mutate(score1 = ifelse(Result == "win", 1, 0.5),
score2 = ifelse(Result == "win", 0, 0.5)) %>%
select(game = match_id, player1 = Link1, score1, player2 = Link2, score2)
View(fights)
lo <- add_elo_ratings(fights2, K=150, initial_ratings = 1000)
ran
s_widecr(fights2)
# 150 was shown to be the optimal K
elo <- add_elo_ratings(fights2, K=150, initial_ratings = 1000)
rankelo <- rank_e
fights2 <- as_widecr(fights2)
# 150 was shown to be the optimal K
elo <- add_elo_ratings(fights2, K=150, initial_ratings = 1000)
rankelo <- rank_elo(fights2, K=150, keep_rating = TRUE, initial_ratings = 1000) %>% arrange(ranking_elo)
rankelo$rating_elo %>% hist
rankelo$rating_elo %>% summary
View(rankelo)
fightsEloLong <- fightsElo %>%
select(match_id, Link1, Date, r1a) %>%
full_join(fightsElo %>%
select(match_id, Link2, Date, r2a),
by = c("match_id" = "match_id", "Link1" = "Link2",
"Date" = "Date", "r1a" = "r2a")) %>%
rename(Link = Link1, rating = r1a) %>%
arrange(Date)
View(fightsEloLong)
fightsEloLong %>% filter(grepl("Israel-Adesanya", Link))
fightsEloLong %>% filter(grepl("Matt-Mitrione", Link))
View(elo)
View(elo)
fightsEloLong %>% filter(grepl("Michelle-Waterson", Link))
merge(fights, elo)
?merge
?merge
merge(fights, elo, by.x=c("match_id", "Fighter1", "Result", "Fighter2"), by.y=c("game", "player1", "score1", "player2"))
fights3 <- merge(fights, elo, by.x=c("match_id", "Fighter1", "Result", "Fighter2"), by.y=c("game", "player1", "score1", "player2"))
View(fights3)
fights3 <- merge(fights, elo, by.x=c("match_id", "Fighter1", "Fighter2"), by.y=c("game", "player1", "player2"))
fights3 <- merge(fights, elo, by.x=c("match_id"), by.y=c("game"))
View(fights3)
fights3 <- merge(fights, elo, by.x=c("match_id", "Link1", "Link2"), by.y=c("game", "player1", "player2"))
View(fights3)
fights3 <- merge(fights, elo, by.x=c("match_id", "Link1", "Link2"),
by.y=c("game", "player1", "player2")) %>%
select(-score1, -score2)
fights3 <- merge(fights, elo, by.x=c("match_id", "Link1", "Link2"),
by.y=c("game", "player1", "player2")) %>%
select(-score1, -score2) %>%
arrange(match_id)
View(fights3)
View(rankelo)
rankelo > 1500
table(1:100)
bin(1:100)
??bin
install.packages("oneR")
install.packages("OneR")
library(OneR)
bin(1:100)
bin(0:100)
bin(0:100) %>% table
bin(rankelo$rating_elo) %>% table
bin(rankelo$rating_elo, nbins = 10) %>% table
bincode(1:100)
.bincode(1:100)
.bincode(1:100, c(0,25,50,75))
.bincode(1:100, c(25,50,75))
.bincode(1:100, c(0, 25,50,75, 100))
.bincode(rankelo$rating_elo, seq(400,2350, 50))
.bincode(rankelo$rating_elo, seq(400,2350, 50)) %>% match(seq(400,2350, 50))
tabulate(c(2,3,3,5), nbins = 10)
tabulate(c(2,3,5)
)
tabulate(c(2,3,5))
fights3
grepl
!!
!!rowSums(sapply(fights3[2:3], grepl, pattern = "Chael-Sonnen"))
fights3[!!rowSums(sapply(fights3[2:3], grepl, pattern = "Chael-Sonnen"))]
fights3[!!rowSums(sapply(fights3[2:3], grepl, pattern = "Chael-Sonnen")),]
fights3[!!rowSums(sapply(fights3[2:3], grepl, pattern = "Chael-Sonnen")),] %>% View
library(tidyverse)
fights3[!!rowSums(sapply(fights3[2:3], grepl, pattern = "Chael-Sonnen")),] %>% View
View(fightsEloLong)
View(fights3)
fights3 %>% mutate(rating1Before - rating2Before)
fights3 %>% mutate(diff = rating1Before - rating2Before) %>% select(diff) %>% summary
fights3[!!rowSums(sapply(fights3[2:3], grepl, pattern = "Travis-Fulton")),] %>% View
fightsEloLong %>% filter(grepl("Travis-Fulton", Link))
fightsEloLong %>% filter(grepl("Travis-Fulton", Link)) %>% View
fightsEloLong %>% filter(grepl("Josh-Kos", Link)) %>% View
fightsEloLong %>% filter(grepl("BJ-Penn", Link)) %>% View
fightsEloLong %>% filter(grepl("Frankie-Edg", Link)) %>% View
fightsEloLong %>% filter(grepl("Cub-Swanson", Link)) %>% View
fightsEloLong %>% filter(grepl("Brian-Ortega", Link)) %>% View
fightsEloLong %>% filter(grepl("Dominick-Reyes", Link)) %>% View
fightsEloLong %>% filter(grepl("Mickey-Gall", Link)) %>% View
fightsEloLong %>% filter(grepl("Sage-North", Link)) %>% View
fightsEloLong %>% filter(grepl("Brock-Les", Link)) %>% View
fightsEloLong %>% filter(grepl("Alistair-Over", Link)) %>% View
fightsEloLong %>% filter(grepl("Curtis-Bla", Link)) %>% View
fightsEloLong %>% filter(grepl("Randy-Cou", Link)) %>% View
fightsEloLong %>% filter(grepl("Chuck-Lid", Link)) %>% View
fightsEloLong %>% filter(grepl("Tito-Ort", Link)) %>% View
fightsEloLong %>% filter(grepl("Wander", Link)) %>% View
fightsEloLong %>% filter(grepl("Wanderlei-Sil", Link)) %>% View
fightsEloLong %>% filter(grepl("Vitor-Belf", Link)) %>% View
fightsEloLong %>% filter(grepl("Bisping", Link)) %>% View
?rank_elo
library(comperank)
?rank_elo
fightsEloLong %>% filter(Date <= "2016-10-08")
fightsEloLong %>% filter(Date <= "2016-10-08") %>% group_by(Link) %>% summarise(max(rating))
?group_by
fightsEloLong %>% filter(Date <= "2016-10-08") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(rtg)
fightsEloLong %>% filter(Date <= "2016-10-08") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg)
fightsEloLong %>% filter(Date <= "2016-10-08") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2011-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2012-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2013-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2014-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2015-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2016-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2017-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2009-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2008-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2007-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2015-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2018-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2014-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "2005-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "1995-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "1992-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "1993-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fightsEloLong %>% filter(Date <= "1999-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
View(fights)
fights$Event %>% table
fightsEloLong %>% filter(grepl("UFC", Event & Date <= "2018-12-31") %>%
group_by(Link) %>%
summarise(rtg = last(rating)) %>%
arrange(-rtg) %>% View()
fights3 %>% filter(grepl("UFC", Event) & Date <= "2018-12-31")
arrange(-rtg) %>% View()
fights3 %>% filter(grepl("UFC|Ultimate Fighter", Event) & Date <= "2018-12-31")
arrange(-rtg) %>% View()
fights3 %>% filter(grepl("UFC|Ultimate Fighter", Event) & Date <= "2018-12-31")
arrange(-rtg) %>% .$Event
fights3 %>% filter(grepl("UFC|Ultimate Fighter", Event) & Date <= "2018-12-31")
arrange(-rtg) %>% select(Event) %>% table()
fights3 %>% filter(grepl("UFC|Ultimate Fighter", Event) & Date <= "2018-12-31")%>% select(Event) %>% table()
fights3 %>% filter(grepl("^UFC|Ultimate Fighter", Event) & Date <= "2018-12-31")%>% select(Event) %>% table()
fights3 %>% filter(grepl("^UFC -|Ultimate Fighter", Event) & Date <= "2018-12-31")%>% select(Event) %>% table()
fights3 %>% filter(grepl("^UFC|Ultimate Fighter", Event) & Date <= "2018-12-31")%>% select(Event)
fights3 %>% filter(grepl("^UFC |Ultimate Fighter", Event) & Date <= "2018-12-31")%>% select(Event)
fights3 %>% filter(grepl("^UFC |Ultimate Fighter", Event) & Date <= "2018-12-31")%>% select(Event) %>% table
fights3 %>% filter(grepl("^UFC |Ultimate Fighting", Event) & Date <= "2018-12-31")%>% select(Event) %>% table
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
unique()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
unique() %>% length
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
c()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
c() %>% unique() %>% length()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
c() %>% unique()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter", Event) & Date <= "2018-12-31") %>%
select(Event) %>% table() %>% View
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on FOX", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on FOX", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table() %>% View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table() %>% View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table() %>% View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox|Ultimate Fight Night", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table() %>% View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox|UFC - Ultimate Fight Night", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table() %>% View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox|Ultimate Fight Night", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table() %>% View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox|UFC Ultimate Fight Night", Event) & Date <= "2018-12-31") %>%
select(Event) %>%
table() %>% View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date <= "2018-12-31")
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event)) %>%
arrange(-rating2Before)
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event)) %>%
arrange(-rating2Before) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
select(-Link1, -Link2) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
select(-Link1, -Link2, -Referee) %>%
View()
?paste
select(match_id, Fighter1, result, Fighter2, record1, record2, rating1Before, rating2Before, rating1After, rating2After) %>%
View()
select(Fighter1, result, Fighter2, record1, record2, rating1Before, rating2Before, rating1After, rating2After) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-")) %>%
select(match_id, Fighter1, result, Fighter2, record1, record2, rating1Before, rating2Before, rating1After, rating2After) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-")) %>%
select(match_id, Fighter1, Result, Fighter2, record1, record2, rating1Before, rating2Before, rating1After, rating2After) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-")) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After) %>%
View()
fightsEloLong %>% filter(grepl("Ariel-Beck", Link))
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, diff) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2005-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, diff) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1Before + rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, diff) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1Before + rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1After - rating1Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum) %>%
View()
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1After - rating1Before,
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum, diff) %>%
View()
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1After - rating1Before,
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum, diff) %>%
select(sum) %>% summary
fights3 %>% mutate(diff = rating1After - rating1Before) %>% select(diff) %>% summary
fights3 %>% mutate(diff = rating1Before - rating2Before) %>% select(diff) %>% summary
fights3 %>% mutate(diff = abs(rating1Before - rating2Before)) %>% select(diff) %>% summary
fights3 %>% mutate(diff = abs(rating1After - rating2After)) %>% select(diff) %>% summary
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1After - rating1Before,
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum, diff) %>%
select(sum) %>% summary
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2010-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1Before + rating2Before,
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum, diff) %>%
select(sum) %>% summary
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2000-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1Before + rating2Before,
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum, diff) %>%
select(sum) %>% summary
fights3 %>%
filter(grepl("^UFC Fight Night|^UFC \\d{1,}|The Ultimate Fighter|UFC on Fox", Event) & Date >= "2017-01-01") %>%
arrange(rating2Before) %>%
mutate(record1 = paste(wins1, loss1, draw1, nc1, sep="-"),
record2 = paste(wins2, loss2, draw2, nc2, sep="-"),
sum = rating1Before + rating2Before,
diff = rating1Before - rating2Before) %>%
select(match_id, Fighter1, Result, Fighter2, Date, record1, record2, rating1Before, rating2Before, rating1After, rating2After, sum, diff) %>%
select(sum) %>% summary
