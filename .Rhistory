names()
}
# delete
pastOdds <- pastOdds %>%
filter(!(eventLink %in% wrongEvents))
rm(wrongEvents, dupedEvents, i)
# Fix a few fighter's names, create stripped version of name
pastOdds <- pastOdds %>%
mutate(fighter = ifelse(fighter == "Jacob-Volkman-1246", "Jacob-Volkmann-3471", fighter),
opponent = ifelse(opponent == "Jacob-Volkman-1246", "Jacob-Volkmann-3471", opponent),
fighter = ifelse(fighter == "Luigi-Vandramini-8636", "Luigi-Vendramini-8636", fighter),
opponent = ifelse(opponent == "Luigi-Vandramini-8636", "Luigi-Vendramini-8636", opponent),
fighter = ifelse(fighter == "Elizeu-Zaleski-5594", "Elizeu-Zaleski-Dos-Santos-6667", fighter),
opponent = ifelse(opponent == "Elizeu-Zaleski-5594", "Elizeu-Zaleski-Dos-Santos-6667", opponent),
fighterLink1s = gsub("(.*)(-\\d*$)", "\\1", fighter) %>% gsub("-", "", .) %>% tolower(),
fighterLink2s = gsub("(.*)(-\\d*$)", "\\1", opponent) %>% gsub("-", "", .) %>% tolower(),
rownum = row_number(),
eventName = gsub(": ", " - ", eventName)) %>%
filter(!(fighter %in% c("Al-Iaquinta-3221", "Paul-Felder-5116") & opponent %in% c("Al-Iaquinta-3221", "Paul-Felder-5116")) &
!(fighter %in% c("John-Howard-692", "Shamil-Gamzatov-6071") & opponent %in% c("John-Howard-692", "Shamil-Gamzatov-6071")) &
!(fighter %in% c("Bekbulat-Magomedov-6022", "Carl-Deaton-5200") & opponent %in% c("Bekbulat-Magomedov-6022", "Carl-Deaton-5200")) &
!(fighter %in% c("Darrick-Minner-4482", "Timur-Valiev-4975") & opponent %in% c("Darrick-Minner-4482", "Timur-Valiev-4975")) &
Date >= '2009-01-01')
filtfights <- filtfights %>%
mutate(fighter1Name = gsub("(.*)(-\\d*$)", "\\1", Link1) %>% gsub("-", "", .) %>% tolower(),
fighter2Name = gsub("(.*)(-\\d*$)", "\\1", Link2) %>% gsub("-", "", .) %>% tolower())
# Begin Matching
filtfightsOdds <- tibble()
for (i in 0:2) {
pastOdds <- pastOdds %>%
mutate(Date2 = Date - i + 1)
filtfightsOdds <- inner_join(filtfights, pastOdds, by = c("fighter1Name" = "fighterLink1s", "fighter2Name" = "fighterLink2s", "Date" = "Date2")) %>%
select(colnames(filtfights), '5Dimes', 'rownum', 'fighter', 'opponent') %>%
rbind(filtfightsOdds)
}
Sherdog_to_BFO <- filtfightsOdds %>%
select(Link1, fighter) %>%
rename(Sherdog = Link1, BFO = fighter) %>%
unique()
filtfightsNotMatched <- anti_join(filtfights, filtfightsOdds, by = "match_id")
pastOddsNotMatched <- anti_join(pastOdds, filtfightsOdds, by = "rownum")
filtfights2 <- as.tibble()
filtfightsOdds2 <- as.tibble()
for (i in 0:2) {
pastOddsNotMatched <- pastOddsNotMatched %>%
mutate(Date2 = Date - i + 1)
filtfights2 <- left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link1" = "Sherdog")) %>%
rename("BFO1" = "BFO") %>%
merge((left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link2" = "Sherdog")) %>%
rename("BFO2" = "BFO"))) %>%
rbind(filtfights2) %>%
arrange(match_id) %>%
distinct()
filtfightsOdds2 <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2') %>%
rbind(filtfightsOdds2)
}
View(filtfightsOdds2)
i=1
inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2"))
pastOddsNotMatched <- pastOddsNotMatched %>%
mutate(Date2 = Date - i + 1)
filtfights2 <- left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link1" = "Sherdog")) %>%
rename("BFO1" = "BFO") %>%
merge((left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link2" = "Sherdog")) %>%
rename("BFO2" = "BFO"))) %>%
rbind(filtfights2) %>%
arrange(match_id) %>%
distinct()
filtfightsOdds2 <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2') %>%
rbind(filtfightsOdds2)
filtfightsOdds2 <- as.tibble()
filtfightsOdds2 <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2') %>%
rbind(filtfightsOdds2)
filtfightsOdds2b <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO2" = "opponent","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2 <- as.tibble()
filtfightsOdds2 <- rbind(filtfightsOdds2a, filtfightsOdds2b, filtfightsOdds2)
filtfightsOdds2a <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2b <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO2" = "opponent","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2 <- rbind(filtfightsOdds2a, filtfightsOdds2b, filtfightsOdds2)
filtfightsOdds2 %>% unique()
rm(filtfightsOdds2a, filtfightsOdds2b)
filtfights2 <- as.tibble()
filtfightsOdds2 <- as.tibble()
for (i in 0:2) {
pastOddsNotMatched <- pastOddsNotMatched %>%
mutate(Date2 = Date - i + 1)
filtfights2 <- left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link1" = "Sherdog")) %>%
rename("BFO1" = "BFO") %>%
merge((left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link2" = "Sherdog")) %>%
rename("BFO2" = "BFO"))) %>%
rbind(filtfights2) %>%
arrange(match_id) %>%
distinct()
filtfightsOdds2a <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2b <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO2" = "opponent","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2 <- rbind(filtfightsOdds2a, filtfightsOdds2b, filtfightsOdds2)
rm(filtfightsOdds2a, filtfightsOdds2b)
}
View(filtfightsOdds2)
filtfightsOdds2 %>% group_by(match_id) %>% summarise(num = n()) %>% arrange(desc(num))
filtfightsOdds2 %>% group_by(match_id) %>% summarise(num = n()) %>% arrange(desc(num)) %>% View()
filtfightsOdds2 %>% group_by(rownum) %>% summarise(num = n()) %>% arrange(desc(num)) %>% View()
filtfightsOdds2 %>% group_by(rownum) %>% summarise(num = n()) %>% arrange(desc(num)) %>% filter(num > 2)
filtfightsOdds2 %>% group_by(rownum) %>% summarise(num = n()) %>% arrange(desc(num)) %>% filter(num > 1)
filtfightsOdds2 %>% group_by(rownum) %>% summarise(num = n()) %>% arrange(desc(num)) %>% filter(num > 1) %>% pull(rownum)
rownum <- filtfightsOdds2 %>% group_by(rownum) %>% summarise(num = n()) %>% arrange(desc(num)) %>% filter(num > 1) %>% pull(rownum)
filtfightsOdds %>% group_by(rownum) %>% summarise(num = n()) %>% arrange(desc(num)) %>% filter(num > 1) %>% pull(rownum)
filtfightsOdds2 %>% filter(rownum = rownum)
rownumvar <- filtfightsOdds2 %>% group_by(rownum) %>% summarise(num = n()) %>% arrange(desc(num)) %>% filter(num > 1) %>% pull(rownum)
rm(rownum)
filtfightsOdds2 %>% filter(rownum == rownumvar)
filtfightsOdds2 %>% filter(rownum == rownumvar) %>% View()
rownum
rownumvar
filtfightsOdds2 %>% filter(rownum %in% rownumvar) %>% View()
View(pastOdds)
library(data.table)
library(tidyverse)
library(stringr)
library(stringdist)
pastOdds <- readRDS("./scripts/7-scrape-odds/data/pastOdds.RDS")
filtfights <- readRDS(file = "./scripts/5-metrics/data/filtfights.rds")
# Events with duplicate links
dupedEvents <- pastOdds %>%
group_by(eventName, eventLink, Date) %>%
summarise(num = n()) %>%
group_by(eventName, Date) %>%
summarise(num = n()) %>%
filter(num > 1) %>%
pull(eventName)
# Find the link that is incorrect
wrongEvents <- c()
for (i in 1:length(dupedEvents)) {
wrongEvents[i] <- sapply(pastOdds %>%
filter(eventName == dupedEvents[i]) %>%
pull(eventLink) %>%
unique(), function(x) stringdist(dupedEvents[i], x)) %>%
which.max() %>%
names()
}
# delete
pastOdds <- pastOdds %>%
filter(!(eventLink %in% wrongEvents))
rm(wrongEvents, dupedEvents, i)
pastOdds %>% group_by(eventName) %>% summarise(n()) %>% View()
pastOdds %>% group_by(eventName) %>% summarise(n()) %>% View() %>% pull(`n()`) %>% unique()
pastOdds %>% group_by(eventName) %>% summarise(num = n()) %>% pull(num) %>% unique()
round(0.5)
?round
ceiling(0.5)
# Fix a few fighter's names, create stripped version of name
pastOdds <- pastOdds %>%
mutate(fighter = ifelse(fighter == "Jacob-Volkman-1246", "Jacob-Volkmann-3471", fighter),
opponent = ifelse(opponent == "Jacob-Volkman-1246", "Jacob-Volkmann-3471", opponent),
fighter = ifelse(fighter == "Luigi-Vandramini-8636", "Luigi-Vendramini-8636", fighter),
opponent = ifelse(opponent == "Luigi-Vandramini-8636", "Luigi-Vendramini-8636", opponent),
fighter = ifelse(fighter == "Elizeu-Zaleski-5594", "Elizeu-Zaleski-Dos-Santos-6667", fighter),
opponent = ifelse(opponent == "Elizeu-Zaleski-5594", "Elizeu-Zaleski-Dos-Santos-6667", opponent),
fighterLink1s = gsub("(.*)(-\\d*$)", "\\1", fighter) %>% gsub("-", "", .) %>% tolower(),
fighterLink2s = gsub("(.*)(-\\d*$)", "\\1", opponent) %>% gsub("-", "", .) %>% tolower(),
rownum = row_number()/2 %>% ceiling(),
eventName = gsub(": ", " - ", eventName)) %>%
filter(!(fighter %in% c("Al-Iaquinta-3221", "Paul-Felder-5116") & opponent %in% c("Al-Iaquinta-3221", "Paul-Felder-5116")) &
!(fighter %in% c("John-Howard-692", "Shamil-Gamzatov-6071") & opponent %in% c("John-Howard-692", "Shamil-Gamzatov-6071")) &
!(fighter %in% c("Bekbulat-Magomedov-6022", "Carl-Deaton-5200") & opponent %in% c("Bekbulat-Magomedov-6022", "Carl-Deaton-5200")) &
!(fighter %in% c("Darrick-Minner-4482", "Timur-Valiev-4975") & opponent %in% c("Darrick-Minner-4482", "Timur-Valiev-4975")) &
Date >= '2009-01-01')
filtfights <- filtfights %>%
mutate(fighter1Name = gsub("(.*)(-\\d*$)", "\\1", Link1) %>% gsub("-", "", .) %>% tolower(),
fighter2Name = gsub("(.*)(-\\d*$)", "\\1", Link2) %>% gsub("-", "", .) %>% tolower())
# Begin Matching
filtfightsOdds <- tibble()
for (i in 0:2) {
pastOdds <- pastOdds %>%
mutate(Date2 = Date - i + 1)
filtfightsOdds <- inner_join(filtfights, pastOdds, by = c("fighter1Name" = "fighterLink1s", "fighter2Name" = "fighterLink2s", "Date" = "Date2")) %>%
select(colnames(filtfights), '5Dimes', 'rownum', 'fighter', 'opponent') %>%
rbind(filtfightsOdds)
}
Sherdog_to_BFO <- filtfightsOdds %>%
select(Link1, fighter) %>%
rename(Sherdog = Link1, BFO = fighter) %>%
unique()
filtfightsNotMatched <- anti_join(filtfights, filtfightsOdds, by = "match_id")
pastOddsNotMatched <- anti_join(pastOdds, filtfightsOdds, by = "rownum")
filtfights2 <- as.tibble()
filtfightsOdds2 <- as.tibble()
for (i in 0:2) {
pastOddsNotMatched <- pastOddsNotMatched %>%
mutate(Date2 = Date - i + 1)
filtfights2 <- left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link1" = "Sherdog")) %>%
rename("BFO1" = "BFO") %>%
merge((left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link2" = "Sherdog")) %>%
rename("BFO2" = "BFO"))) %>%
rbind(filtfights2) %>%
arrange(match_id) %>%
distinct()
filtfightsOdds2a <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2b <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO2" = "opponent","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2 <- rbind(filtfightsOdds2a, filtfightsOdds2b, filtfightsOdds2)
rm(filtfightsOdds2a, filtfightsOdds2b)
}
View(filtfightsOdds2)
ceiling(1087.5)
# Fix a few fighter's names, create stripped version of name
pastOdds <- pastOdds %>%
mutate(fighter = ifelse(fighter == "Jacob-Volkman-1246", "Jacob-Volkmann-3471", fighter),
opponent = ifelse(opponent == "Jacob-Volkman-1246", "Jacob-Volkmann-3471", opponent),
fighter = ifelse(fighter == "Luigi-Vandramini-8636", "Luigi-Vendramini-8636", fighter),
opponent = ifelse(opponent == "Luigi-Vandramini-8636", "Luigi-Vendramini-8636", opponent),
fighter = ifelse(fighter == "Elizeu-Zaleski-5594", "Elizeu-Zaleski-Dos-Santos-6667", fighter),
opponent = ifelse(opponent == "Elizeu-Zaleski-5594", "Elizeu-Zaleski-Dos-Santos-6667", opponent),
fighterLink1s = gsub("(.*)(-\\d*$)", "\\1", fighter) %>% gsub("-", "", .) %>% tolower(),
fighterLink2s = gsub("(.*)(-\\d*$)", "\\1", opponent) %>% gsub("-", "", .) %>% tolower(),
rownum = ceiling(row_number()/2),
eventName = gsub(": ", " - ", eventName)) %>%
filter(!(fighter %in% c("Al-Iaquinta-3221", "Paul-Felder-5116") & opponent %in% c("Al-Iaquinta-3221", "Paul-Felder-5116")) &
!(fighter %in% c("John-Howard-692", "Shamil-Gamzatov-6071") & opponent %in% c("John-Howard-692", "Shamil-Gamzatov-6071")) &
!(fighter %in% c("Bekbulat-Magomedov-6022", "Carl-Deaton-5200") & opponent %in% c("Bekbulat-Magomedov-6022", "Carl-Deaton-5200")) &
!(fighter %in% c("Darrick-Minner-4482", "Timur-Valiev-4975") & opponent %in% c("Darrick-Minner-4482", "Timur-Valiev-4975")) &
Date >= '2009-01-01')
View(pastOdds)
filtfights <- filtfights %>%
mutate(fighter1Name = gsub("(.*)(-\\d*$)", "\\1", Link1) %>% gsub("-", "", .) %>% tolower(),
fighter2Name = gsub("(.*)(-\\d*$)", "\\1", Link2) %>% gsub("-", "", .) %>% tolower())
# Begin Matching
filtfightsOdds <- tibble()
for (i in 0:2) {
pastOdds <- pastOdds %>%
mutate(Date2 = Date - i + 1)
filtfightsOdds <- inner_join(filtfights, pastOdds, by = c("fighter1Name" = "fighterLink1s", "fighter2Name" = "fighterLink2s", "Date" = "Date2")) %>%
select(colnames(filtfights), '5Dimes', 'rownum', 'fighter', 'opponent') %>%
rbind(filtfightsOdds)
}
Sherdog_to_BFO <- filtfightsOdds %>%
select(Link1, fighter) %>%
rename(Sherdog = Link1, BFO = fighter) %>%
unique()
filtfightsNotMatched <- anti_join(filtfights, filtfightsOdds, by = "match_id")
pastOddsNotMatched <- anti_join(pastOdds, filtfightsOdds, by = "rownum")
filtfights2 <- as.tibble()
filtfightsOdds2 <- as.tibble()
for (i in 0:2) {
pastOddsNotMatched <- pastOddsNotMatched %>%
mutate(Date2 = Date - i + 1)
filtfights2 <- left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link1" = "Sherdog")) %>%
rename("BFO1" = "BFO") %>%
merge((left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link2" = "Sherdog")) %>%
rename("BFO2" = "BFO"))) %>%
rbind(filtfights2) %>%
arrange(match_id) %>%
distinct()
filtfightsOdds2a <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2b <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO2" = "opponent","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2 <- rbind(filtfightsOdds2a, filtfightsOdds2b, filtfightsOdds2)
rm(filtfightsOdds2a, filtfightsOdds2b)
}
View(filtfightsOdds2)
rownumvar <- filtfightsOdds2 %>%
group_by(rownum) %>%
summarise(num = n()) %>%
arrange(desc(num)) %>%
filter(num > 1) %>%
pull(rownum)
filtfightsOdds2 %>%
filter(rownum == rownumvar)
filtfightsOdds2 %>%
group_by(rownum) %>%
summarise(num = n())
filtfightsOdds2 %>%
group_by(rownum) %>%
summarise(num = n()) %>%
arrange(desc(num)) %>%
filter(num > 2)
rownumvar <- filtfightsOdds2 %>%
group_by(rownum) %>%
summarise(num = n()) %>%
arrange(desc(num)) %>%
filter(num > 2) %>%
pull(rownum)
filtfightsOdds2 %>%
filter(rownum == rownumvar)
filtfightsOdds2 %>%
filter(rownum == rownumvar) %>%
View()
filtfightsOdds2 %>%
group_by(rownum) %>%
summarise(num = n())
filtfightsOdds2 %>%
group_by(rownum) %>%
summarise(num = n()) %>%
arrange(desc(num))
filtfightsOdds2 %>%
filter(rownum %in% rownumvar) %>%
View()
pastOdds %>%
filter(rownum %in% rownumvar) %>%
View()
test <- filtfightsOdds2 %>%
filter(rownum %in% rownumvar)
test %>% View()
View(test)
pastOdds %>%
filter(rownum %in% rownumvar) %>%
View()
View(test)
View(filtfightsOdds2)
filtfightsOdds2 %>%
filter(!(rownum %in% rownumvar))
filtfights2 <- as.tibble()
filtfightsOdds2 <- as.tibble()
for (i in 0:2) {
pastOddsNotMatched <- pastOddsNotMatched %>%
mutate(Date2 = Date - i + 1)
filtfights2 <- left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link1" = "Sherdog")) %>%
rename("BFO1" = "BFO") %>%
merge((left_join(filtfightsNotMatched, Sherdog_to_BFO, by= c("Link2" = "Sherdog")) %>%
rename("BFO2" = "BFO"))) %>%
rbind(filtfights2) %>%
arrange(match_id) %>%
distinct()
filtfightsOdds2a <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO1" = "fighter","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2b <- inner_join(filtfights2, pastOddsNotMatched,
by = c("BFO2" = "opponent","Date" = "Date2")) %>%
select(colnames(filtfights2), '5Dimes', 'rownum', 'BFO1', 'BFO2')
filtfightsOdds2 <- rbind(filtfightsOdds2a, filtfightsOdds2b, filtfightsOdds2)
rm(filtfightsOdds2a, filtfightsOdds2b)
}
rownumvar <- filtfightsOdds2 %>%
group_by(rownum) %>%
summarise(num = n()) %>%
arrange(desc(num)) %>%
filter(num > 2) %>%
pull(rownum)
filtfightsOdds2 <- filtfightsOdds2 %>%
filter(!(rownum %in% rownumvar))
Sherdog_to_BFO2 <- filtfightsOdds2 %>%
select(Link1, fighter) %>%
rename(Sherdog = Link1, BFO = fighter) %>%
unique()
Sherdog_to_BFO2 <- filtfightsOdds2 %>%
select(Link1, fighter) %>%
rename(Sherdog = Link1, BFO1 = fighter) %>%
unique()
Sherdog_to_BFO2 <- filtfightsOdds2 %>%
select(Link1, BFO1) %>%
rename(Sherdog = Link1) %>%
unique()
Sherdog_to_BFO2 <- filtfightsOdds2 %>%
select(Link2, BFO2) %>%
rename(Sherdog = Link2) %>%
unique()
Sherdog_to_BFO2 <- filtfightsOdds2 %>%
select(Link1, BFO1) %>%
rename(Sherdog = Link1) %>%
unique()
merge(Sherdog_to_BFO, Sherdog_to_BFO2)
full_join(Sherdog_to_BFO, Sherdog_to_BFO2)
left_join(Sherdog_to_BFO, Sherdog_to_BFO2)
Sherdog_to_BFO <- filtfightsOdds2 %>%
select(Link1, BFO1) %>%
rename(Sherdog = Link1) %>%
rbind(Sherdog_to_BFO) %>%
unique()
filtfightsOdds2 %>%
select(Link1, BFO1) %>%
rename(Sherdog = Link1)
Sherdog_to_BFO <- filtfightsOdds2 %>%
select(Link1, BFO1) %>%
rename(Sherdog = Link1, BFO = BFO1) %>%
rbind(Sherdog_to_BFO) %>%
unique()
rm(Sherdog_to_BFO2)
fightersTable <- readRDS("~/GitHub/MMAscraper/scripts/9-various-tables/data/fightersTable.rds")
View(fightersTable)
fightMetrics <- readRDS(file = "./scripts/5-metrics/data/fightMetrics.rds")
events <- tibble(Event = unique(fightMetrics$Event),
Org = gsub(" -.*", "", Event)) %>%
mutate(Org = ifelse(Org == "UFC", gsub(".* -", "", Event), Org),
Org = ifelse(grepl("^UFC - The Ultimate Fighter|^UFC \\d+|^UFC Fight Night|^UFC Live \\d|UFC on Fox \\d+|^UFC on Fuel TV \\d+|^UFC on FX", Event),
"UFC", Org),
Org = ifelse(grepl("Underground Fight Club", Event), "Underground Fight Club", Org),
Org = ifelse(grepl("Bellator Fighting Championships|Bellator MMA|^Bellator \\d{3}", Event), "Bellator", Org),
Org = gsub(" \\d+$", "", Org),
Org = ifelse(grepl("^M-1", Event), "M-1", Org),
Org = ifelse(grepl("^Strikeforce", Event), "Strikeforce", Org),
Org = ifelse(Org == "Pride", "Pride FC", Org),
Org = ifelse(grepl("^Absolute Championship Berkut", Event), "ACB", Org),
Org = ifelse(grepl("^Fight Nights|^EFN - Fight Nights|^FNG - Fight Nights", Event), "FNG", Org),
Org = ifelse(Org == "One FC", "One Championship", Org),
Org = ifelse(grepl("Rizin", Event), "Rizin", Org))
fightMetrics <- fightMetrics %>% full_join(events)
# Both fighters must have at least 3 career fights
filtfights <- fightMetrics %>%
filter(wins1 + loss1 + draw1 >= 3,
wins2 + loss2 + draw2 >= 3,
Org %in% c("ACB", "Bellator", "CWFC", "Dana White's Tuesday Night Contender Series", "FNG", "Golden Boy MMA",
"Invicta FC", "KSW", "LFA", "M-1", "One Championship",
"Professional Fighters League", "Rizin", "Strikeforce", "UFC"),
Date >= "2009-01-01")
library(tidyverse)
library(data.table)
events <- tibble(Event = unique(fightMetrics$Event),
Org = gsub(" -.*", "", Event)) %>%
mutate(Org = ifelse(Org == "UFC", gsub(".* -", "", Event), Org),
Org = ifelse(grepl("^UFC - The Ultimate Fighter|^UFC \\d+|^UFC Fight Night|^UFC Live \\d|UFC on Fox \\d+|^UFC on Fuel TV \\d+|^UFC on FX", Event),
"UFC", Org),
Org = ifelse(grepl("Underground Fight Club", Event), "Underground Fight Club", Org),
Org = ifelse(grepl("Bellator Fighting Championships|Bellator MMA|^Bellator \\d{3}", Event), "Bellator", Org),
Org = gsub(" \\d+$", "", Org),
Org = ifelse(grepl("^M-1", Event), "M-1", Org),
Org = ifelse(grepl("^Strikeforce", Event), "Strikeforce", Org),
Org = ifelse(Org == "Pride", "Pride FC", Org),
Org = ifelse(grepl("^Absolute Championship Berkut", Event), "ACB", Org),
Org = ifelse(grepl("^Fight Nights|^EFN - Fight Nights|^FNG - Fight Nights", Event), "FNG", Org),
Org = ifelse(Org == "One FC", "One Championship", Org),
Org = ifelse(grepl("Rizin", Event), "Rizin", Org))
fightMetrics <- readRDS(file = "./scripts/5-metrics/data/fightMetrics.rds")
fightMetrics <- fightMetrics %>% full_join(events)
# Both fighters must have at least 3 career fights
filtfights <- fightMetrics %>%
filter(wins1 + loss1 + draw1 >= 3,
wins2 + loss2 + draw2 >= 3,
Org %in% c("ACB", "Bellator", "CWFC", "Dana White's Tuesday Night Contender Series", "FNG", "Golden Boy MMA",
"Invicta FC", "KSW", "LFA", "M-1", "One Championship",
"Professional Fighters League", "Rizin", "Strikeforce", "UFC"),
Date >= "2009-01-01")
fightMetrics %>% filter(grepl(Link1, "Rachel-Ostovich")) %>% View9)
fightMetrics %>% filter(grepl(Link1, "Rachel-Ostovich")) %>% View()
fightMetrics %>% filter(grepl(Link1, "Rachael-Ostovich")) %>% View()
fightMetrics %>% filter(grepl("Rachael-Ostovich", Link1)) %>% View()
fightMetrics %>% filter(grepl("Montana-De-la", Link1)) %>% View()
fightMetrics %>% filter(grepl("Rachael-Ostovich", Link1)) %>% View()
fightMetrics %>% filter(grepl("Montana", Link1)) %>% View()
fightMetrics %>% filter(grepl("Montana-De-La", Link1)) %>% View()
fightMetrics %>% filter(grepl("Paige-Van", Link1)) %>% View()
fightMetrics %>% filter(grepl("Allen-Crowder", Link1)) %>% View()
fightMetrics %>% filter(grepl("Ariane-L", Link1)) %>% View()
fightMetrics %>% filter(grepl("Joanne-Cal", Link1)) %>% View()
fightMetrics %>% filter(grepl("Ariane-L", Link1)) %>% View()
fightMetrics %>% filter(grepl("Joanne-Cal", Link1)) %>% View()
fightMetrics %>% filter(grepl("Ronda Rousey", Link1)) %>% View()
fightMetrics %>% filter(grepl("Ronda-Rousey", Link1)) %>% View()
fightMetrics %>% filter(grepl("Amanda-Nune", Link1)) %>% View()
fightMetrics %>% filter(grepl("Germai", Link1)) %>% View()
fightMetrics %>% filter(grepl("Germaine-d", Link1)) %>% View()
fightMetrics %>% filter(grepl("Valentina-Shev", Link1)) %>% View()
fightMetrics %>% filter(grepl("Joanna-Jed", Link1)) %>% View()
fightMetrics %>% filter(grepl("Nina-An", Link1)) %>% View()
fightMetrics %>% filter(grepl("Kayla-Harr", Link1)) %>% View()
fightMetrics %>% filter(grepl("Aaron-Pico", Link1)) %>% View()
fightMetrics %>% filter(grepl("James-Toney"), Link1)) %>% View()
fightMetrics %>% filter(grepl("Toney"), Link1)) %>% View()
fightMetrics %>% filter(grepl("Gegard-M", Link1)) %>% View()
fightMetrics %>% filter(grepl("Chris-Weid", Link1)) %>% View()
fightMetrics %>% filter(grepl("Yoel-Rome", Link1)) %>% View()
fightMetrics %>% filter(grepl("Colby-Cov", Link1)) %>% View()
fightMetrics %>% filter(grepl("Islam-Mak", Link1)) %>% View()
fightMetrics %>% filter(grepl("Travis-Fulton", Link1)) %>% View()
fightMetrics %>% filter(grepl("Kanna-Asa", Link1)) %>% View()
fightMetrics %>% filter(grepl("Aucl", Link1)) %>% View()
fightMetrics %>% filter(grepl("medov$", Link1)) %>% View()
fightMetrics %>% filter(grepl("medov^", Link1)) %>% View()
fightMetrics %>% filter(grepl("medov", Link1)) %>% View()
fightMetrics %>% filter(grepl("medov-", Link1)) %>% View()
fightersTable %>% filter(grepl("medov$", Name)) %>% View()
fightersTable %>% filter(grepl("medov$", Name), wins + loss + draw + NC > 9) %>% View()
fightersTable %>% filter(grepl("magomed", Name), wins + loss + draw + NC > 9) %>% View()
fightersTable %>% filter(grepl("agomed", Name), wins + loss + draw + NC > 9) %>% View()
fightersTable %>% filter(grepl("agomed", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating))
fightersTable %>% filter(grepl("Mike", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating))
fightersTable %>% filter(grepl("Silva", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating))
fightersTable %>% filter(grepl("Anderson", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating))
fightersTable %>% filter(grepl("Jones", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating))
fightersTable %>% filter(grepl("Nunes", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating))
fightersTable %>% filter(grepl("Nunes", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating), n())
fightersTable %>% filter(grepl("agomedov", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating), n())
fightersTable %>% filter(grepl("sharipov", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating), n())
fightersTable %>% filter(grepl("ripov", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating), n())
fightersTable %>% filter(grepl("pov", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating), n())
fightersTable %>% filter(grepl("dov-", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating), n())
fightersTable %>% filter(grepl("dov$", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating), n())
fightersTable %>% filter(grepl("dov$", Name), wins + loss + draw + NC > 9)
fightersTable %>% filter(grepl("Chris", Name), wins + loss + draw + NC > 9)
fightersTable %>% filter(grepl("Chris", Name), wins + loss + draw + NC > 9) %>% summarise(mean(rating), n())
